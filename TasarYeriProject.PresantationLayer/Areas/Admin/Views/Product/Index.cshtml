@using TasarYeriProject.EntityLayer.Concrete
@using X.PagedList
@using X.PagedList.Mvc.Core
@using X.PagedList.Web.Common
@model IPagedList<Product>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!DOCTYPE html>
<html>


<body>
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2>ÜRÜNLER</h2>
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="index.html">Ana Sayfa</a>
                </li>
                <li class="breadcrumb-item active">
                    <strong>Ürünler Listesi</strong>
                </li>
            </ol>
        </div>
        <div class="col-lg-2">
        </div>
    </div>
    <div class=" mt-5 mb-5">
        <div class="col-lg-12">
            <table class="table table-bordered">
                <thead>
                    <tr>

                        <th>Sayı</th>
                        <th>Ürün Adı </th>
                        <th>Ürün Fotoğraf </th>
                        <th>Tarih</th>
                        <th>Kategori</th>
                        <th>Stok Adedi</th>
                        <th>Sahibi</th>
                        <th>Durumu</th>
                        <th>Pasif Yap</th>
                        <th>Aktif Yap</th>
                        <th>Düzenle</th>
                    </tr>
                </thead>
                <tbody>
                    @for (var i = 0; i < Model.Count; i++)
                    {
                        var item = Model[i];
                        <tr>
                            <td id="rowNumber@(i)"></td>  <!-- Sıra numarasını kullan -->
                            <td>@item.ProductName</td>
                            <td><img style="height:50px; width:60px;" src="@item.ImageUrl" /></td>
                            <td>@(((DateTime)item.AddedDate).ToString("dd-MMM-yyyy HH:mm"))</td>
                            <td>@item.Category.CategoryName</td>
                            <td>@item.StockQuantity</td>
                            <td>@item.AppUser.Name @item.AppUser.Surname</td>
                            <td>@item.ProductStatus</td>
                            <td><a href="/Admin/Product/GetProductPassive/@item.ProductId/" class="btn btn-warning">Pasif Yap</a></td>
                            <td><a href="/Admin/Product/GetProductActive/@item.ProductId/" class="btn btn-info">Aktif Yap</a></td>
                            <td><a href="/Admin/Product/ProductDetail/@item.ProductId/" class="btn btn-primary">Detaya Git</a></td>
                        </tr>
                    }
                </tbody>
               
            </table>
        </div>
    </div>
    <br />
    <div style=" position: fixed; left: 250px; bottom: 50px; ">
        @* sayfalamayı sabitlemek için yazıldı *@
        @Html.PagedListPager((IPagedList)Model,page=>Url.Action("Index", new {page}), new
        PagedListRenderOptions{
        LiElementClasses= new string[]{"page-item"},
        PageClasses= new string[]{"page-link" },
        })
    </div>
       
    <div style=" position: fixed; right: 30px; bottom: 80px; ">
        <a href="/Admin/Product/AddProduct" class="btn btn-success">Yeni Ürün Ekle</a>
    </div>

    <!-- Mainly scripts -->
    <script src="/admin2/js/jquery-3.1.1.min.js"></script>
    <script src="/admin2/js/popper.min.js"></script>
    <script src="/admin2/js/bootstrap.js"></script>
    <script src="/admin2/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/admin2/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>



    <!-- Flot -->
    <script src="/admin2/js/plugins/flot/jquery.flot.js"></script>
    <script src="/admin2/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="/admin2/js/plugins/flot/jquery.flot.spline.js"></script>
    <script src="/admin2/js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="/admin2/js/plugins/flot/jquery.flot.pie.js"></script>
    <script src="/admin2/js/plugins/flot/jquery.flot.symbol.js"></script>
    <script src="/admin2/js/plugins/flot/curvedLines.js"></script>

    <!-- Peity -->
    <script src="/admin2/js/plugins/peity/jquery.peity.min.js"></script>
    <script src="/admin2/js/demo/peity-demo.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/admin2/js/inspinia.js"></script>
    <script src="/admin2/js/plugins/pace/pace.min.js"></script>

    <!-- jQuery UI -->
    <script src="/admin2/js/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- Jvectormap -->
    <script src="/admin2/js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
    <script src="/admin2/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

    <!-- Sparkline -->
    <script src="/admin2/js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <!-- Sparkline demo data  -->
    <script src="/admin2/js/demo/sparkline-demo.js"></script>

    <!-- ChartJS-->
    <script src="/admin2/js/plugins/chartJs/Chart.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="admin2/js/inspinia.js"></script>
    <script src="admin2/js/plugins/pace/pace.min.js"></script>

    <!-- iCheck -->
    <script src="admin2/js/plugins/iCheck/icheck.min.js"></script>


    <!-- SUMMERNOTE -->
    <script src="/admin2/js/plugins/summernote/summernote-bs4.js"></script>

    <!-- Data picker -->
    <script src="/admin2/js/plugins/datapicker/bootstrap-datepicker.js"></script>

    <!-- slick carousel-->
    <script src="/admin2/js/plugins/slick/slick.min.js"></script>

    <script type="text/javascript">
        // Şu anki sayfa numarası
        var currentPage = @Model.PageNumber;
        var pageSize = @Model.PageSize;

        // Sayfa yüklendiğinde sıra numarasını kontrol et ve doğru sırayı göster
        window.onload = function () {
            var urlParams = new URLSearchParams(window.location.search);
            var pageParam = urlParams.get('page');
            if (pageParam !== null) {
                currentPage = parseInt(pageParam);
            }

            // Sıra numaralarını güncelle
            updateRowNumbers();
        };

        // Sıra numaralarını güncellemek için işlev
        function updateRowNumbers() {
            var rows = document.querySelectorAll('tbody tr');
            for (var i = 0; i < rows.length; i++) {
                var row = rows[i];
                var rowNumberCell = row.querySelector('td[id^="rowNumber"]');
                if (rowNumberCell) {
                    rowNumberCell.textContent = (currentPage - 1) * pageSize + i + 1;
                }
            }
        }
    </script>
    
    
</body>
</html>
